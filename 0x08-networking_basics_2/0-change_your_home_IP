#!/bin/bash

# Create a temporary file for modified hosts entries
TMP_FILE="hosts_mod"

# Check if the temporary file already exists
if [ -f "$TMP_FILE" ]; then
  echo "Warning: Temporary file '$TMP_FILE' already exists. Overwriting..."
  rm -f "$TMP_FILE"
fi

# Copy original hosts file to temporary file
cp /etc/hosts "$TMP_FILE"

# Modify entries in temporary file
# Use sed to replace 127.0.0.1 with 127.0.0.2
sed -i 's/127.0.0.1/127.0.0.2/g' "$TMP_FILE"

# Append facebook.com entry
echo "8.8.8.8 facebook.com" >> "$TMP_FILE"

# Forcefully copy modified entries back to original hosts file
sudo cp -f "$TMP_FILE" /etc/hosts

# (Optional) Remove temporary file
# If you don't need the temporary file anymore, uncomment this line
# rm -f "$TMP_FILE"

echo "Hosts file updated. Localhost now resolves to 127.0.0.2 and facebook.com to 8.8.8.8."
